<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Sean&#39;s Blog</title>
  
  <subtitle>less is more, old is new.</subtitle>
  <link href="http://sean0921.github.io/atom.xml" rel="self"/>
  
  <link href="http://sean0921.github.io/"/>
  <updated>2020-12-09T18:05:09.814Z</updated>
  <id>http://sean0921.github.io/</id>
  
  <author>
    <name>Sean Ho</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>CentOS 再見，但，CentOS Stream 真有那麼不堪嗎?</title>
    <link href="http://sean0921.github.io/2020/12/10/centos-stream-replace-centos-8/"/>
    <id>http://sean0921.github.io/2020/12/10/centos-stream-replace-centos-8/</id>
    <published>2020-12-09T17:04:27.000Z</published>
    <updated>2020-12-09T18:05:09.814Z</updated>
    
    <content type="html"><![CDATA[<p>自從 12/8 CentOS blog 和 Mailing list 相繼宣佈將要轉移開發重心到 CentOS Stream 上，並計劃要讓 CentOS 8.x (有版號的 release) 提前退休後</p><p><a href="https://blog.centos.org/2020/12/future-is-centos-stream/">https://blog.centos.org/2020/12/future-is-centos-stream/</a><br><a href="https://lists.centos.org/pipermail/centos-announce/2020-December/048208.html">https://lists.centos.org/pipermail/centos-announce/2020-December/048208.html</a></p><p>甚至出現<a href="https://www.cyberciti.biz/linux-news/centos-linux-8-will-end-in-2021-and-shifts-focus-to-centos-stream/">報導</a>指出：CentOS Stream 不會比 RHEL 早拿到安全更新，又要幫 RHEL 先測試新套件，同時因為 CentOS Stream 的環境比較新，你在 CentOS Stream 上面構建的套件還無法移植回 RHEL 上</p><p>但我認為這個論點有一些不充分甚至是誤導的地方。</p><a id="more"></a><h2 id="基本觀念"><a href="#基本觀念" class="headerlink" title="基本觀念"></a>基本觀念</h2><p>在講下去之前，先記住兩件事實：</p><ol><li>RHEL/CentOS/CentOS Stream 在同一個大版號 (major release, 6/7/8) 內的 ABI/API 是保持穩定不變的 [^1]</li><li>CentOS 的安全性更新本來就是晚於 RHEL 的，且相較其他主流發行版晚很多</li></ol><h2 id="討論"><a href="#討論" class="headerlink" title="討論"></a>討論</h2><blockquote><ul><li>How will CVEs be handled in CentOS Stream?<br>…<br>In other words, CentOS Streams users will test RHEL ahead of everyone and<br>report bugs, but they won’ t get security updates till resolved in RHEL. Very<br>tricky situation.</li></ul></blockquote><p>這邊沒提到的是，傳統的 CentOS 本來就是這樣:</p><ul><li><a href="https://lists.centos.org/pipermail/centos-announce/2020-November/035873.html">https://lists.centos.org/pipermail/centos-announce/2020-November/035873.html</a></li><li><a href="https://lists.centos.org/pipermail/centos-announce/2020-November/035814.html">https://lists.centos.org/pipermail/centos-announce/2020-November/035814.html</a></li></ul><p>以這幾篇為例，傳統的 CentOS 本來就要等上一個禮拜（年代久遠的 release 甚至要到一個月）以上的時間才會接到來自 RHEL 的 Security patch，改成 CentOS Stream 之後不但不會比較慢，也有機會在更短的時間內接到 patch</p><blockquote><ul><li>Does this mean that CentOS Stream is the RHEL BETA test platform now?<br>…<br>There is no option if you use CentOS for CI<br>because you couldn’t use RHEL developer licenses.<br>Also, note that CentOS Stream will have different ABI/API at times,<br>so you can no longer test or build EPEL packages locally.</li></ul></blockquote><p>但 FAQ 其他地方已經講明了 <em>CentOS Stream is focused on the next RHEL minor release</em>.</p><p>然後 RHEL/CentOS 的 minor release 就是擺明不會變這些東西，想要用新套件/新東西，就是抓 software collection、module stream、epel、第三方repo 來用，不會也不應該因為 <code>dnf update</code>/<code>yum update</code> 之後一切都炸了</p><p>所以 <em>no longer test or build EPEL packages locally</em> 根本就偏離事實，再說如果真的是「packaging」的話，RHEL 和 CentOS 的套件相依性本來就完全對不起來了，換成 CentOS Stream 不會因此有什麼改變</p><h2 id="社群反應"><a href="#社群反應" class="headerlink" title="社群反應"></a>社群反應</h2><p>但現在的風向都一面倒認為不應該限制別人用 RHEL 吃剩的 CentOS (8.x/9.x…)，連當初 CentOS 的 Founder 都說要來 fork 出 Rocky Linux</p><p>好吧，我懷疑我的想法太天真了</p><p>但過往的 CentOS 的社群風氣、使用者/貢獻者比例，相對於其他發行版真的差太多了，RHEL 8 出來時<a href="https://www.centos.org/forums/viewtopic.php?f=10&t=71468">追 CentOS 8 開發進度</a>時才在 <a href="https://lists.centos.org/pipermail/centos-devel/2019-September/017694.html">mailing list</a> 發現維運這個專案的工作人力只有 3 個人，不做出這樣策略性的改變，懷疑 CentOS 發行版還能撐多久? (IBM/RedHat 也不可能無限制地投入資源)，所以即使 Rocky Linux 真的出來了，我也懷疑這樣的動力能維持多久 (或許它能夠號召到更多有同樣需求的贊助商吧)</p><h2 id="參考資源"><a href="#參考資源" class="headerlink" title="參考資源"></a>參考資源</h2><p>[^1] <a href="https://access.redhat.com/articles/rhel8-abi-compatibility#Scope">https://access.redhat.com/articles/rhel8-abi-compatibility#Scope</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;自從 12/8 CentOS blog 和 Mailing list 相繼宣佈將要轉移開發重心到 CentOS Stream 上，並計劃要讓 CentOS 8.x (有版號的 release) 提前退休後&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.centos.org/2020/12/future-is-centos-stream/&quot;&gt;https://blog.centos.org/2020/12/future-is-centos-stream/&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://lists.centos.org/pipermail/centos-announce/2020-December/048208.html&quot;&gt;https://lists.centos.org/pipermail/centos-announce/2020-December/048208.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;甚至出現&lt;a href=&quot;https://www.cyberciti.biz/linux-news/centos-linux-8-will-end-in-2021-and-shifts-focus-to-centos-stream/&quot;&gt;報導&lt;/a&gt;指出：CentOS Stream 不會比 RHEL 早拿到安全更新，又要幫 RHEL 先測試新套件，同時因為 CentOS Stream 的環境比較新，你在 CentOS Stream 上面構建的套件還無法移植回 RHEL 上&lt;/p&gt;
&lt;p&gt;但我認為這個論點有一些不充分甚至是誤導的地方。&lt;/p&gt;</summary>
    
    
    
    
    <category term="linux" scheme="http://sean0921.github.io/tags/linux/"/>
    
    <category term="operating-system" scheme="http://sean0921.github.io/tags/operating-system/"/>
    
    <category term="redhat" scheme="http://sean0921.github.io/tags/redhat/"/>
    
    <category term="centos" scheme="http://sean0921.github.io/tags/centos/"/>
    
    <category term="centos-stream" scheme="http://sean0921.github.io/tags/centos-stream/"/>
    
    <category term="rhel" scheme="http://sean0921.github.io/tags/rhel/"/>
    
  </entry>
  
  <entry>
    <title>使用 WSL/WSL2 的 gv 取代過時的 gsview</title>
    <link href="http://sean0921.github.io/2020/12/04/replace-gsview-with-wsl-gv/"/>
    <id>http://sean0921.github.io/2020/12/04/replace-gsview-with-wsl-gv/</id>
    <published>2020-12-04T04:24:08.000Z</published>
    <updated>2020-12-04T04:35:03.792Z</updated>
    
    <content type="html"><![CDATA[<p>很多人在 Windows 上觀看從 <a href="https://www.generic-mapping-tools.org/">GMT</a> 或 其他繪圖軟體產生的 postscript 檔 (<code>*.ps</code>) 時，都會選擇下載 Ghostgum GSview 5.0 或破解版 GSview 6.0，然而無論何種版本，該軟體早已不再被官方或第三方維護。有任何軟體問題或是安全性問題基本上等於無解。但 Linux 或其他 Unix-Like 平臺仍有 <a href="https://www.gnu.org/software/gv/">GNU gv</a> 可以使用與回報相關問題，甚至提供 <a href="https://git.savannah.gnu.org/cgit/gv.git">git repository</a> 追蹤開發進度。該如何在 Windows 10 使用呢? 現在我們有比較穩定的方法可以解決這個問題了</p><a id="more"></a><p>最簡單的方法就是<a href="https://docs.microsoft.com/zh-tw/windows/wsl/install-win10">安裝 WSL</a>，相當於開一個更輕量化的虛擬機，直接進入 WSL 後，在檔案目錄下對要檢視的 <code>gv filename.ps</code> 就搞定了，但如果是一些依賴 <code>gsview32</code>/<code>gsview64</code> 指令的程式呢?</p><p>事實上很單純，主要分成以下步驟</p><h2 id="0-安裝-WSL-VcXsrv"><a href="#0-安裝-WSL-VcXsrv" class="headerlink" title="0. 安裝 WSL, VcXsrv"></a>0. 安裝 WSL, VcXsrv</h2><p><a href="https://sourceforge.net/projects/vcxsrv/">VcXsrv</a> 是個有持續被維護且開放原始碼的 Windows X-server 軟體，安裝完啟動後記得選勾選 <code>Disable access control</code>，該程式相關防火牆設定都先打開，若機器長期暴露在公共網路 (有外網ip)，可自行研究 Xorg 的 xauth 怎麼設定，這邊先不細講。</p><p>當然 WSL 要自行安裝 <code>gv</code> 這個套件，也要檢查你的發行版有沒有順便幫你裝 <code>ghostscript</code> 等套件</p><h2 id="1-在自己使用者選項設定客製化執行路徑-PATH"><a href="#1-在自己使用者選項設定客製化執行路徑-PATH" class="headerlink" title="1. 在自己使用者選項設定客製化執行路徑 (%PATH%)"></a>1. 在自己使用者選項設定客製化執行路徑 (<code>%PATH%</code>)</h2><p>相關教學很多，這邊有 <a href="https://java.com/zh-TW/download/help/path_zh-tw.html">Java 的教學</a> 可以參考</p><h2 id="2-在-PATH-底下創建-batch-腳本"><a href="#2-在-PATH-底下創建-batch-腳本" class="headerlink" title="2. 在 %PATH% 底下創建 batch 腳本"></a>2. 在 <code>%PATH%</code> 底下創建 batch 腳本</h2><p>以 WSL 2 為例:</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> on</span><br><span class="line">wsl.exe -d debian env DISPLAY=&quot;$(ip route|grep &#x27;default via&#x27;|awk &#x27;&#123;<span class="built_in">print</span> $<span class="number">3</span>&#125;&#x27;):<span class="number">0</span>.<span class="number">0</span>&quot; gv %*</span><br></pre></td></tr></table></figure><p>在 DOS batch 腳本的 <code>%*</code> 是指吃所有餵進去的參數 (例如 <code>gv -eof test.ps</code> 的 <code>-eof test.ps</code>)<br>取成你喜歡的指令名，像我取成 <code>gsviewwsl.bat</code></p><h2 id="3-在-Windows-開-cmd，對你要開的檔案進行測試"><a href="#3-在-Windows-開-cmd，對你要開的檔案進行測試" class="headerlink" title="3. 在 Windows 開 cmd，對你要開的檔案進行測試"></a>3. 在 Windows 開 cmd，對你要開的檔案進行測試</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gsviewwsl hello.ps</span><br></pre></td></tr></table></figure><p>或許 Cygwin 也可以做一樣的事情，但考量 Cygwin 速度沒有比較快且擴充性差很多，這邊就不研究與介紹了，若有 Windows 7 電腦有類似需求，請再用一樣的概念自己整理方法。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;很多人在 Windows 上觀看從 &lt;a href=&quot;https://www.generic-mapping-tools.org/&quot;&gt;GMT&lt;/a&gt; 或 其他繪圖軟體產生的 postscript 檔 (&lt;code&gt;*.ps&lt;/code&gt;) 時，都會選擇下載 Ghostgum GSview 5.0 或破解版 GSview 6.0，然而無論何種版本，該軟體早已不再被官方或第三方維護。有任何軟體問題或是安全性問題基本上等於無解。但 Linux 或其他 Unix-Like 平臺仍有 &lt;a href=&quot;https://www.gnu.org/software/gv/&quot;&gt;GNU gv&lt;/a&gt; 可以使用與回報相關問題，甚至提供 &lt;a href=&quot;https://git.savannah.gnu.org/cgit/gv.git&quot;&gt;git repository&lt;/a&gt; 追蹤開發進度。該如何在 Windows 10 使用呢? 現在我們有比較穩定的方法可以解決這個問題了&lt;/p&gt;</summary>
    
    
    
    
    <category term="freesoftware" scheme="http://sean0921.github.io/tags/freesoftware/"/>
    
    <category term="linux" scheme="http://sean0921.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Violet Evergarden 劇場版心得</title>
    <link href="http://sean0921.github.io/2020/10/09/violet-evergarden-movie/"/>
    <id>http://sean0921.github.io/2020/10/09/violet-evergarden-movie/</id>
    <published>2020-10-09T15:40:58.000Z</published>
    <updated>2020-12-04T03:45:09.507Z</updated>
    
    <content type="html"><![CDATA[<p>你累了嗎? 先聽首歌，好嗎: <a href="https://www.youtube.com/watch?v=OrmO23ALlEU">https://www.youtube.com/watch?v=OrmO23ALlEU</a></p><p>第一次聽到這個作品的名字是在瀏覽討論京阿尼的文章中看到的，那時聽名字以及看作品封面也沒太大興趣，可能是因為之前嘗試看類似印象的作品不知是因為鋪陳節奏問題還是其它原因，幾乎沒看多少集就放掉了。紫羅蘭的話則是因為肥宅朋友推坑所以決定趁這個機會看一下。或許本身就是一個重視氛圍感受&gt;思考劇情有沒有邏輯的人吧，發現劇情節奏以及情緒體驗都比想像中好很多，於是就決定追到電影院看劇場版了。</p><p>滿多地方都有介紹它的主軸是什麼，以及作品要怎麼補，我就說一下我的感受好了。這部的劇情主線看似就是個思念愛人的愛情故事，但我認為更大的意義在於「理解自己生而為人的各種感情」，最後才回歸主線，做自己能做的事。故事主軸的「愛」也泛指著親情、愛情、友情，因此沒有看起來一直愛來愛去的腐爛感，而是透過各種戰後小故事的鋪陳，帶給人們有個打從心底開始鼓舞自己，擁抱悲傷後走下去的療癒感。</p><p>以下聊聊劇情相關的心得吧 (劇場為主, TV、外傳爲輔)</p><a id="more"></a><p><a href="https://www.youtube.com/watch?v=OaO8xKEL-Jc">官方 10min 試看影片</a>，不知道之後會不會下架。</p><p>電影一開始，就很犯規地從 Ann 的故事切入，大概開始約 6 分鐘之後我就快不行了，沒辦法因為我也是第 10 集劇情的受害者.. 而電影的介紹主線就從 Ann 孫女看到那 50 封信引起追尋那位代筆人的動機，然後有 Violet 照片的剪報開始飄走，開啟了 TV 版故事後續的劇情。</p><p>就直接講講一些印象深刻的角色吧 </p><p>Benidict 在這次的劇場版比較少著墨，但在外傳劇場版中表現讓人感覺其實滿有魅力的，所以可以理解 Cattleya 為什麼會欣賞這個可愛男性了，當然在最後劇情時他和 Iris 等同事們也扮演著重要的角色。</p><p>而 Cattleya 除了有本來想要大聲斥責的魅力外，她的觀點也是滿有趣的: 讓 Violet 和 Dietfried 相互療傷。然後 Hodgins 的吐槽很有趣，還被後面的自己打臉。</p><p>如果 Fate HF 劇場版的其中一個賣點在於把姐姐氣質描述得令人動容，那哥哥氣質就是 Violet 劇場版的其一重要賣點了。</p><p>TV 版裡面的 Dietfried，看起來就是個當初教唆他弟弟把 Violet 當殺人工具使用，只會責怪 Violet 沒有保護好他弟弟的壞份子。但到了電影版，他「不坦率」的一面表現得愈來愈明顯，也更加從巧遇 Violet 代祭拜 Gilbert 母親的事件中看出他對老弟深切的思念。那段父子三人一起散步的回憶真的很重要，這也開啟了後續可以與劇場版 Violet 委託人故事可以相呼輝映的兄弟之情。</p><p>劇場版帶到最重要的委託事件就是 Yuris 的生前委託，他是重病末期患者，但也是拉不下臉當面向家人表達心意，甚至叫朋友不要過來探病的傲嬌小男孩。因此委託就是類似 Ann 母親那樣寫下最後一封給家人的信。然而等到要寫信給朋友的時候，身體已經撐不下去了，甚至到最後重病時也來不及把最後一封信寫完，只好使用剛開始流行的「電話」向他的摯友道別，這樣的方式，同時也讓我感受到一個書信時代結束的氛圍。</p><p>而「電話」開始逐漸取代書信這樣的劇情鋪陳，其實從外傳就開始一直刻意強調了，也就是 Benidict 常常送信到一位老阿嬤家，聽著她喃喃自語電波塔什麼時候蓋好的小橋段。到了本傳劇場版的結尾，電波塔終於蓋好了，科技持續進步，書信逐漸式微，時代的洪流持續推進，然而人與人之間真實的感情卻永遠也不會變。</p><p>套路的劇情，卻因為電影把 Yuris 性格表現地極為細膩，Violet 的幽默(我就爛)與同理表現地極為立體，讓人容易隨著裡面角色的情緒哭與笑，悲傷與喜悅。</p><h2 id="結局感想"><a href="#結局感想" class="headerlink" title="結局感想"></a>結局感想</h2><p>主線收尾雖然 Violet 哭得要死要活的，看到那段的時候卻完全不會想哭，會有種我們家的女兒終於長大，認識了一切的悲喜感情，有了為所愛事物勇敢表達心意的勇氣，而為此感到高興。Violet 寫給 Gilbert 那封信的最後一句話拿去翻譯，就是呼應電影大字幕安排的「真誠地愛著你，Violet Evergarden」。</p><p>我喜歡這樣浪漫而模糊的收尾，就是辭職之後直接去島上當人偶陪著 Gilbert，那種從此過著幸福快樂的生活，不用去想太多的感覺。看到島上郵局還綁著 Violet 髮上的紅絲帶，郵局別著人偶徽章的郵差比著我就爛(X)，也覺得很感動。Ann 的孫女也開始學著寫信給忙著工作沒能好好陪伴她，卻一直在乎著她愛著她的辛苦父母傳達感謝。溫馨的結尾，往往有著令人安心卻不失後勁的觀影後體驗。</p><p>如果對 2020 年有著無法釋懷的偏見，那紫羅蘭劇場版大概就是京阿尼帶給 2020 年的人們最好的禮物了。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;你累了嗎? 先聽首歌，好嗎: &lt;a href=&quot;https://www.youtube.com/watch?v=OrmO23ALlEU&quot;&gt;https://www.youtube.com/watch?v=OrmO23ALlEU&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;第一次聽到這個作品的名字是在瀏覽討論京阿尼的文章中看到的，那時聽名字以及看作品封面也沒太大興趣，可能是因為之前嘗試看類似印象的作品不知是因為鋪陳節奏問題還是其它原因，幾乎沒看多少集就放掉了。紫羅蘭的話則是因為肥宅朋友推坑所以決定趁這個機會看一下。或許本身就是一個重視氛圍感受&amp;gt;思考劇情有沒有邏輯的人吧，發現劇情節奏以及情緒體驗都比想像中好很多，於是就決定追到電影院看劇場版了。&lt;/p&gt;
&lt;p&gt;滿多地方都有介紹它的主軸是什麼，以及作品要怎麼補，我就說一下我的感受好了。這部的劇情主線看似就是個思念愛人的愛情故事，但我認為更大的意義在於「理解自己生而為人的各種感情」，最後才回歸主線，做自己能做的事。故事主軸的「愛」也泛指著親情、愛情、友情，因此沒有看起來一直愛來愛去的腐爛感，而是透過各種戰後小故事的鋪陳，帶給人們有個打從心底開始鼓舞自己，擁抱悲傷後走下去的療癒感。&lt;/p&gt;
&lt;p&gt;以下聊聊劇情相關的心得吧 (劇場為主, TV、外傳爲輔)&lt;/p&gt;</summary>
    
    
    
    
    <category term="anime" scheme="http://sean0921.github.io/tags/anime/"/>
    
    <category term="oil" scheme="http://sean0921.github.io/tags/oil/"/>
    
  </entry>
  
  <entry>
    <title>Folding@Home 試用心得</title>
    <link href="http://sean0921.github.io/2020/09/13/folding-at-home/"/>
    <id>http://sean0921.github.io/2020/09/13/folding-at-home/</id>
    <published>2020-09-13T04:33:19.000Z</published>
    <updated>2020-09-19T09:54:29.419Z</updated>
    
    <content type="html"><![CDATA[<p>其實很久很久以前就好像聽過這東西了<br>只是 3 月的時候因為 COVID-19 所以又好像有媒體在宣傳這個專案</p><p>於是那時在終於有自己的機器可以運用的前提下</p><a id="more"></a><p>(以前拿家裡公用的電腦挖這些，可能家人會有意見吧)</p><p>就去看官網看怎麼裝，能不能裝在 Linux 上，然後就拿<a href="https://foldingathome.org/alternative-downloads/">官方的 debian 包</a>來用用看</p><p>發現 <code>fahcontrol_7.5.1-1_all.deb</code> 竟然還相依 <a href="https://en.wikipedia.org/wiki/GNOME#GNOME_2">GNOME 2.x</a> 相關已經沒有人在維護的套件…. ( Python2 + Gtk2 的 <a href="https://en.wikipedia.org/wiki/PyGTK">PyGTK</a> 就算了?)</p><p>於是在那時還沒有時間搞的前提下怒用 <a href="https://www.docker.com/">Docker</a> 的 <a href="https://wiki.debian.org/DebianStretch">Debian Stretch (9.x)</a> 的映像來跑他的東西….</p><p>感覺這專案資助的單位還是滿有來頭的… 應該不至於沒經費繼續更新吧? 只是這部分的開發與維護剛好沒有被重視? 或是覺得不緊急不重要?</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;其實很久很久以前就好像聽過這東西了&lt;br&gt;只是 3 月的時候因為 COVID-19 所以又好像有媒體在宣傳這個專案&lt;/p&gt;
&lt;p&gt;於是那時在終於有自己的機器可以運用的前提下&lt;/p&gt;</summary>
    
    
    
    
    <category term="sysadmin" scheme="http://sean0921.github.io/tags/sysadmin/"/>
    
    <category term="foss" scheme="http://sean0921.github.io/tags/foss/"/>
    
    <category term="covid19" scheme="http://sean0921.github.io/tags/covid19/"/>
    
    <category term="distributed computing" scheme="http://sean0921.github.io/tags/distributed-computing/"/>
    
    <category term="container" scheme="http://sean0921.github.io/tags/container/"/>
    
  </entry>
  
  <entry>
    <title>Debian 最新版 nonfree 韌體安裝筆記</title>
    <link href="http://sean0921.github.io/2020/09/12/debian-firmware-nonfree/"/>
    <id>http://sean0921.github.io/2020/09/12/debian-firmware-nonfree/</id>
    <published>2020-09-12T08:15:44.000Z</published>
    <updated>2020-09-23T08:34:27.671Z</updated>
    
    <content type="html"><![CDATA[<h2 id="介紹"><a href="#介紹" class="headerlink" title="介紹"></a>介紹</h2><p>在使用 Debian GNU/Linux 這個發行版時，我們想要在兼顧 Debian Stable 穩定的特性下使用版本較新的套件，這時候 Backports 就是一個被官方社群支援的選項。然而有時我們還是會遇到裝了新版 backport kernel, non-free 韌體內容跟不上或找不到的小問題 (不影響系統運作)。除了 Bug Report 回報給相關社群之外，在等待的期間還可以做哪些處置來兼顧新版套件安裝與後續套件管理(apt)支援? 我們可以利用 Debian Salsa 的 GitLab 資源來協助我們參閱或修改測試中或已經釋出的打包腳本，讓 Debian 及其衍生發行版的套件資源變得更加健全。</p><a id="more"></a><h2 id="筆記"><a href="#筆記" class="headerlink" title="筆記"></a>筆記</h2><p>每次在 Debian Stable 想裝 <a href="https://backports.debian.org/">backports</a> 的 <a href="https://kernel.org/">kernel</a> (通常版本是次新釋出的穩定分支) 遇到了缺某些韌體的訊息</p><p>雖然看不出來系統會因此發生什麼問題，還是記一下更新的方式</p><p>首先要用 <code>apt</code> 先安裝 <code>linux-support-&lt;kernel version&gt;</code> 套件</p><p>以及: [^1]</p><ul><li><code>git</code> (要從 <a href="https://salsa.debian.org/">Debian Salsa</a> 抓 repo)</li><li><code>build-essential</code></li><li><code>fakeroot</code> </li><li><code>devscripts</code> (利用 debhelper 建標準 Debian 套件)</li></ul><p>然後</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://salsa.debian.org/kernel-team/firmware-nonfree.git \</span><br><span class="line">          /path/to/workdir/debian_firmware_nonfree/firmware-nonfree</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /path/to/workdir/debian_firmware_nonfree/firmware-nonfree  <span class="comment">#自己改路徑</span></span><br></pre></td></tr></table></figure><p>再 <code>git clone</code> <a href="https://kernel.org/">kernel.org</a> 維護的 <code>linux-firmware</code> 專案:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git://git.kernel.org/pub/scm/linux/kernel/git/firmware/linux-firmware.git \</span><br><span class="line">          /path/to/workdir/debian_firmware_nonfree/linux-firmware</span><br></pre></td></tr></table></figure><p>進去 <code>/path/to/workdir/debian_firmware_nonfree/firmware-nonfree</code>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PYTHONPATH=/usr/share/linux-support-&lt;kernel version&gt;/lib/python debian/rules \</span><br><span class="line">debian/control   <span class="comment">#自己改 kernel 版本</span></span><br></pre></td></tr></table></figure><p>或是改 <code>debian/rule.defs</code> 確認自己的 kernel 版號對不對後，<code>debian/rules debian/control</code><br>(通常不對，因為沒有 debian 後綴版號)</p><p>然後</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PYTHONPATH=/usr/share/linux-support-&lt;kernel version&gt;/lib/python \</span><br><span class="line">            debian/bin/release-update \</span><br><span class="line">            /path/to/workdir/debian_firmware_nonfree/linux-firmware</span><br></pre></td></tr></table></figure><p>然後忘記會不會幫你解包了</p><p>之後就把 <code>debian/</code> 目錄放到解好的地方 或是在有放 <code>debian/</code> 的目錄解包解過去</p><p>然後就照常</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mk-build-deps debian/control  <span class="comment">## 通常東西都裝完了，不會裝新的東西</span></span><br><span class="line">debuild -b -us -uc  <span class="comment">## 就叫 debhelper 系列的工具幫你把套件生出來</span></span><br></pre></td></tr></table></figure><p>然後再往上層目錄找包好的套件</p><p>然後再選你要裝的 linux 韌體 sudo apt install ./&lt;套件名稱&gt;.deb</p><p>完工！ 重開機</p><p>通常應該不會出事…. 吧…</p><h2 id="結論"><a href="#結論" class="headerlink" title="結論"></a>結論</h2><p>Debian Salsa 和 Debian backports 都是很好用的東西，嫌 Debian 太舊的人都該先試試這些東西並且嘗試 Bug Report 看 Maintainer 態度再來評論好壞。</p><h3 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h3><p>說到這個想到有時在裝完 backport kernel 時且把 <code>quiet splash</code> 關掉之後</p><p>就會在 systemd 訊息看到 <code>networking.service</code> 跟 <a href="https://en.wikipedia.org/wiki/NetworkManager"><code>NetworkManager.service</code></a> 打架的訊息<br>(<code>networking.service</code> 本質上還是 <a href="https://en.wikipedia.org/wiki/Init">SysV init</a> 的東西只是 <a href="https://en.wikipedia.org/wiki/Systemd">systemd</a> 向下相容它)</p><p>這時都是選擇留 <code>NetworkManager</code> 砍 <code>networking</code> 相關的 script 套件</p><p>做完之後確定 <code>NetworkManager</code> 有在做事就搞定了</p><h2 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h2><p>[^1] <a href="https://wiki.debian.org/BuildingTutorial">https://wiki.debian.org/BuildingTutorial</a></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;介紹&quot;&gt;&lt;a href=&quot;#介紹&quot; class=&quot;headerlink&quot; title=&quot;介紹&quot;&gt;&lt;/a&gt;介紹&lt;/h2&gt;&lt;p&gt;在使用 Debian GNU/Linux 這個發行版時，我們想要在兼顧 Debian Stable 穩定的特性下使用版本較新的套件，這時候 Backports 就是一個被官方社群支援的選項。然而有時我們還是會遇到裝了新版 backport kernel, non-free 韌體內容跟不上或找不到的小問題 (不影響系統運作)。除了 Bug Report 回報給相關社群之外，在等待的期間還可以做哪些處置來兼顧新版套件安裝與後續套件管理(apt)支援? 我們可以利用 Debian Salsa 的 GitLab 資源來協助我們參閱或修改測試中或已經釋出的打包腳本，讓 Debian 及其衍生發行版的套件資源變得更加健全。&lt;/p&gt;</summary>
    
    
    
    
    <category term="debian" scheme="http://sean0921.github.io/tags/debian/"/>
    
    <category term="firmware" scheme="http://sean0921.github.io/tags/firmware/"/>
    
    <category term="packaging" scheme="http://sean0921.github.io/tags/packaging/"/>
    
    <category term="salsa" scheme="http://sean0921.github.io/tags/salsa/"/>
    
    <category term="sysadmin" scheme="http://sean0921.github.io/tags/sysadmin/"/>
    
  </entry>
  
</feed>
